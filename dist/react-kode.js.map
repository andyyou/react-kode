{"version":3,"file":"react-kode.js","sources":["../node_modules/object-assign/index.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../src/kode.js","../src/utils.js"],"sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  highlight,\n  enableLineNumber,\n  embedInlineCSS,\n} from './utils';\nclass Kode extends Component {\n  constructor(props) {\n    super(props);\n\n    this.el = React.createRef();\n    embedInlineCSS();\n  }\n\n  componentDidMount() {\n    const {\n      children,\n      lang,\n      isEnableLineNumber,\n      initialLineNumber,\n    } = this.props;\n\n    const snippet = highlight(children, lang || 'plaintext').value;\n    const innerHTML = isEnableLineNumber ? enableLineNumber(snippet, initialLineNumber) : snippet;\n    this.el.current.innerHTML = innerHTML;\n  }\n\n  render() {\n    const {\n      lang,\n      className,\n    } = this.props;\n    const props = {\n      className,\n    };\n    return (\n      <div {...props}>\n        <pre className=\"hljs-pre\">\n          <code\n            className={`hljs ${lang}`}\n            ref={this.el}\n          />\n        </pre>\n      </div>\n    );\n  }\n}\nKode.propTypes = {\n  lang: PropTypes.string,\n  isEnableLineNumber: PropTypes.bool,\n  initialLineNumber: PropTypes.number,\n  diff: PropTypes.shape({\n    addition: PropTypes.shape({\n      start: PropTypes.number,\n      end: PropTypes.number,\n    }),\n    deletion: PropTypes.shape({\n      start: PropTypes.number,\n      end: PropTypes.number,\n    }),\n  }),\n};\nKode.defaultProps = {\n  lang: 'plaintext',\n  isEnableLineNumber: false,\n  initialLineNumber: 1,\n  diff: null,\n};\nexport default Kode;\n","import hljs from 'highlight.js';\n/**\n * HTML Encode in browser.\n * @param {string} snippet\n */\nexport const encodeHTML = (snippet) => {\n  const el = document.createElement('div');\n  el.appendChild(document.createTextNode(snippet));\n  return el.innerHTML;\n};\n\n/**\n * Using highlight.js covert code to html\n * @param {string} str\n * @param {string} lang\n */\nexport const highlight = (str, lang) => {\n  let snippet = str.trim();\n  const matching = snippet.trim().match(/(\\r?\\n)/);\n  const separator = matching ? matching[1] : '';\n  const lines = matching ? snippet.split(separator) : [snippet];\n  let result = hljs.highlight(lang, lines.shift());\n  let html = result.value;\n  while (lines.length > 0) {\n    result = hljs.highlight(lang, lines.shift(), false, result.top);\n    html += separator + result.value;\n  }\n\n  result.value = html;\n  return result;\n}\n\n/**\n * The string generate by highlight.js\n * @param {string} htmlString\n */\nexport const enableLineNumber = (htmlString, initialLineNumber) => {\n  const lines = htmlString.split('\\n');\n  const innerHTML = lines.map((ln, i) => {\n    return `<tr class=\"hljs-ln\">\n      <td><span class=\"hljs-num\">${initialLineNumber + i} </span></td>\n      <td>${ln}</td>\n    </tr>`;\n  }).join('');\n  return `<table class=\"hljs-table\">${innerHTML}</table>`;\n}\n\n/**\n * Add inline css\n */\nexport const embedInlineCSS = () => {\n  const style = document.createElement('style');\n  const css = `\n    .hljs-pre {\n      margin: 0;\n    }\n    .hljs-table {\n      border-collapse: collapse;\n    }\n    .hljs-table td:nth-child(2) {\n      width: 100%;\n    }\n    .hljs-num {\n      user-select: none;\n      -moz-user-select: none;\n    }\n  `;\n  style.type = 'text/css';\n  style.appendChild(document.createTextNode(css));\n  document.head.appendChild(style);\n}\n"],"names":["getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","map","n","join","test3","split","forEach","letter","keys","err","shouldUseNative","emptyFunction","module","shim","props","propName","componentName","location","propFullName","secret","Error","name","getShim","ReactPropTypes","array","isRequired","bool","func","number","object","string","symbol","any","arrayOf","element","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","require$$1","Kode","style","el","React","createRef","document","createElement","type","appendChild","createTextNode","head","Component","initialLineNumber","innerHTML","this","children","lang","isEnableLineNumber","snippet","str","trim","matching","match","separator","lines","result","hljs","highlight","shift","html","value","length","top","ln","current","className","ref","propTypes","diff","addition","start","end","deletion","defaultProps"],"mappings":"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"}